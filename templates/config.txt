import { QueueConfig } from '@ioc:Adonis/Addons/Queue'
import Env from '@ioc:Adonis/Core/Env'

/*
|--------------------------------------------------------------------------
| Queue Config
|--------------------------------------------------------------------------
|
| Queue configuration affects Jobs and Listeners.
|
*/
const queueConfig: QueueConfig = {
  /*
  |--------------------------------------------------------------------------
  | Default Queue Name
  |--------------------------------------------------------------------------
  |
  | The default queue name must be one of the queues in the queue list.
  |
  */
  defaultQueue: 'main',

  /*
  |--------------------------------------------------------------------------
  | Queue List
  |--------------------------------------------------------------------------
  |
  | The key name of the object is the queue name.
  |
  */
  queues: {
    main: {
      connection: {
        host: Env.get('BUS_REDIS_HOST', 'localhost'),
        port: Env.get('BUS_REDIS_PORT', 6379),
        password: Env.get('BUS_REDIS_PASSWORD'),
        db: Env.get('BUS_REDIS_DB', 0),
      },
    },
  },
}

export default queueConfig
